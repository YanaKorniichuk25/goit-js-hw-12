{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/img/icon-error.svg","../src/main.js"],"sourcesContent":["import axios from 'axios';\nexport async function getDataFromAPI(\n  baseUrl,\n  apiKey,\n  inputValue,\n  page,\n  limitPageContent\n) {\n  const fullUrl = constructUrl(\n    baseUrl,\n    apiKey,\n    inputValue,\n    page,\n    limitPageContent\n  );\n  try {\n    const { data } = await axios.get(fullUrl);\n    return data;\n  } catch (error) {\n    console.error('Error fetching data:', error);\n    throw error;\n  }\n}\n\nfunction constructUrl(baseUrl, apiKey, inputValue, page, limitPageContent) {\n  const searchParams = new URLSearchParams({\n    key: apiKey,\n    q: inputValue,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: 'true',\n    page: page,\n    per_page: limitPageContent,\n  });\n  return `${baseUrl}?${searchParams}`;\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nexport function renderGalleryImg(parentEl, data) {\n  parentEl.insertAdjacentHTML('beforeend', generateGalleryMarkup(data));\n  lightbox.refresh();\n}\n\nfunction generateGalleryMarkup(data) {\n  return data\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) =>\n        ` <li class=\"gallery-item\">\n      <a class=\"gallery-link\" href=\"${largeImageURL}\">\n        <figure class=\"gallery-figure\">\n          <img class=\"gallery-image\" src=\"${webformatURL}\" alt=\"${tags}\" width=\"360\" />\n          <figcaption class=\"gallery-figcaption\">\n            <ul class=\"gallery-text\">\n              <li>\n                <span>Likes</span>\n                <p>${likes}</p>\n              </li>\n              <li>\n                <span>Views</span>\n                <p>${views}</p>\n              </li>\n              <li>\n                <span>Comments</span>\n                <p>${comments}</p>\n              </li>\n              <li>\n                <span>Downloads</span>\n                <p>${downloads}</p>\n              </li>\n            </ul>\n          </figcaption>\n        </figure>\n      </a>\n    </li>`\n    )\n    .join(' ');\n}\n","export default \"__VITE_ASSET__eb775c6f__\"","import { getDataFromAPI } from './js/pixabay-api';\nimport { renderGalleryImg } from './js/render-functions';\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport iconError from './img/icon-error.svg';\n\nconst apiKey = '43227230-2cc9b082dfeccb819f6787c2c';\nconst baseUrl = 'https://pixabay.com/api/';\n\nconst searchForm = document.querySelector('.search-form');\nconst galleryEl = document.querySelector('.gallery');\nconst loaderWrapper = document.querySelector('.loader-wrapper');\nconst btnLoadMore = document.querySelector('.load-more-btn');\n\nlet currentPage = 1;\nlet limitPageContent = 15;\nlet currentSearchQuery = null;\nlet totalContent = null;\nlet totalPages = null;\n\nsearchForm.addEventListener('submit', onSubmitForm);\nbtnLoadMore.addEventListener('click', onLoadMoreButtonClick);\n\nasync function onSubmitForm(e) {\n  e.preventDefault();\n  galleryEl.innerHTML = '';\n  btnLoadMore.classList.add('is-hidden');\n  currentPage = 1;\n\n  const inputSearchValue = e.currentTarget.search.value.trim();\n\n  if (!inputSearchValue) {\n    displayErrorMessage('Please enter a value in the field!', 'Error');\n    e.currentTarget.reset();\n    return;\n  }\n\n  loaderWrapper.classList.remove('is-hidden');\n  await fetchData(\n    baseUrl,\n    apiKey,\n    inputSearchValue,\n    currentPage,\n    limitPageContent\n  );\n\n  e.currentTarget.reset();\n}\n\nasync function fetchData(\n  baseUrl,\n  apiKey,\n  inputSearchValue,\n  page,\n  limitPageContent\n) {\n  try {\n    const data = await getDataFromAPI(\n      baseUrl,\n      apiKey,\n      inputSearchValue,\n      page,\n      limitPageContent\n    );\n    const formData = data.hits;\n\n    if (formData.length === 0) {\n      displayErrorMessage(\n        'Sorry, there are no images matching your search query. Please try again!'\n      );\n      return;\n    }\n\n    currentSearchQuery = inputSearchValue;\n    totalContent = data.totalHits;\n    totalPages = Math.ceil(totalContent / limitPageContent);\n\n    renderGalleryImg(galleryEl, formData);\n\n    btnLoadMore.classList.remove('is-hidden');\n    smoothScroll();\n  } catch (error) {\n    displayErrorMessage('Error fetching data. Please try again later', 'Error');\n    console.error('Error fetching data:', error);\n  } finally {\n    loaderWrapper.classList.add('is-hidden');\n  }\n}\n\nasync function onLoadMoreButtonClick() {\n  const totalPages = Math.ceil(totalContent / limitPageContent);\n\n  if (currentPage >= totalPages) {\n    btnLoadMore.classList.add('is-hidden');\n    displayErrorMessage(\n      'We are sorry, but you have reached the end of search results',\n      'Error'\n    );\n    return;\n  }\n\n  currentPage++;\n  loaderWrapper.classList.remove('is-hidden');\n  fetchData(baseUrl, apiKey, currentSearchQuery, currentPage, limitPageContent);\n}\n\nfunction smoothScroll() {\n  const galleryItem = document.querySelector('.gallery-item');\n  const galleryItemHeight = galleryItem.getBoundingClientRect().height;\n\n  window.scrollBy({\n    top: galleryItemHeight * 2,\n    behavior: 'smooth',\n  });\n}\n\nconst iziToastConfig = {\n  position: 'topRight',\n  titleColor: '#FFF',\n  titleSize: '16',\n  titleLineHeight: '24',\n  messageColor: '#FFF',\n  messageSize: '16',\n  messageLineHeight: '24',\n};\n\nfunction displayErrorMessage(message, title) {\n  iziToast.error({\n    ...iziToastConfig,\n    title: title || '',\n    message: `${message}`,\n    backgroundColor: '#EF4040',\n    iconUrl: iconError,\n  });\n}\n"],"names":["getDataFromAPI","baseUrl","apiKey","inputValue","page","limitPageContent","fullUrl","constructUrl","data","axios","error","searchParams","lightbox","SimpleLightbox","renderGalleryImg","parentEl","generateGalleryMarkup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","iconError","searchForm","galleryEl","loaderWrapper","btnLoadMore","currentPage","currentSearchQuery","totalContent","totalPages","onSubmitForm","onLoadMoreButtonClick","e","inputSearchValue","displayErrorMessage","fetchData","formData","smoothScroll","galleryItemHeight","iziToastConfig","message","title","iziToast"],"mappings":"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"}